FROM debian:trixie


RUN apt-get update && \
    apt-get upgrade -y && \
    DEBIAN_FRONTEND=noninteractive apt-get install -y \
    wget curl && \
    apt-get clean && rm -rf /var/lib/apt/lists/*

#Add old sources
RUN echo "deb http://ftp.de.debian.org/debian sid main" > /etc/apt/sources.list

RUN apt update && \
    apt install -y \
    openjdk-8-jre-headless && \
    apt-get clean && rm -rf /var/lib/apt/lists/*
 
RUN wget https://download.elasticsearch.org/elasticsearch/elasticsearch/elasticsearch-1.4.2.tar.gz && \
    tar xfz elasticsearch-1.4.2.tar.gz && \
    mv elasticsearch-1.4.2 elasticsearch

EXPOSE 9200

COPY init.sh /
ENTRYPOINT ["/init.sh"]
CMD ["default"]

